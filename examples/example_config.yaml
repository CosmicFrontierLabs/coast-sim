# COAST-Sim Mission Configuration File
# Generated YAML configuration with annotations
#
# This file defines the complete spacecraft configuration including:
#   - Spacecraft bus and subsystems
#   - Power generation and storage
#   - Payload instruments
#   - Ground stations
#   - Operational constraints
#
# Units Legend:
#   Power: Watts (W)
#   Energy: Watt-hours (Wh)
#   Time: seconds (s) unless otherwise specified
#   Angles: degrees (deg)
#   Data rates: Gigabits per second (Gbps) or Megabits per second (Mbps)
#   Data volume: Gigabits (Gb) or Gigabytes (GB)
#   Slew rates: degrees per second (deg/s)
#   Acceleration: degrees per second squared (deg/s²)

# Mission name/identifier
name: Example Spacecraft Configuration

# Spacecraft Bus Configuration. Defines the main spacecraft platform including power, attitude control, and communications
spacecraft_bus:
  # name: Name of the spacecraft bus
  name: Example Spacecraft Bus
  # power_draw: Power draw specifications for bus systems
  power_draw:
    # nominal_power: Nominal power draw in Watts
    nominal_power: 50.0
    # peak_power: Peak power draw in Watts
    peak_power: 300.0
    # power_mode: Mode-specific power draw mapping (mode -> Watts)
    power_mode:
      '0': 70.0
      '1': 100.0
    # eclipse_power: Optional power draw during eclipse in Watts
    eclipse_power: null
    # eclipse_power_mode: Mode-specific power draw during eclipse (mode -> Watts)
    eclipse_power_mode: {}
  # attitude_control: Attitude control system (ACS) configuration
  attitude_control:
    # slew_acceleration: Maximum angular acceleration in degrees/second²
    slew_acceleration: 0.01
    # max_slew_rate: Maximum slew rate in degrees/second (15 deg/min)
    max_slew_rate: 0.3
    # slew_accuracy: Pointing accuracy after slew completion in degrees
    slew_accuracy: 0.01
    # settle_time: Time to settle after slew completion in seconds
    settle_time: 10.0
  # communications: Communications system configuration
  communications: null
  # heater: Heater system configuration
  heater:
    name: Bus Heaters
    power_draw:
      nominal_power: 25.0
      peak_power: 300.0
      power_mode: {}
      eclipse_power: 75.0
      eclipse_power_mode: {}
  # data_generation: Data generation specifications for bus-level data
  data_generation:
    # rate_gbps: Data generation rate in Gbps when active
    rate_gbps: 0.0
    # per_observation_gb: Fixed data generated per observation in Gb
    per_observation_gb: 0.0

# Solar Panel Configuration. Defines solar array characteristics and power generation capability
solar_panel:
  # name: Name for the solar panel array
  name: Default Solar Panel
  # panels: List of individual solar panel configurations
  panels:
    - name: Example Solar Panel
      # gimbled: Whether the panel is gimbled
      gimbled: false
      # sidemount: Whether panel is side-mounted relative to boresight
      sidemount: true
      # cant_x: Cant angle about the spacecraft X-axis (deg). Together with cant_y this forms one of two orthogonal tilt components of the panel normal. For body-mounted panels the net cant is computed from cant_x and cant_y; for side-mounted panels it is applied relative to the nominal side mount.
      cant_x: 0.0
      # cant_y: Cant angle about the spacecraft Y-axis (deg). This is the second orthogonal tilt component, combined with cant_x (e.g., via their resultant magnitude) to define the overall panel cant. Its effect depends on sidemount: for body-mounted panels it contributes to the net cant away from boresight, while for side-mounted panels it tilts the panel relative to the nominal side-mounted orientation.
      cant_y: 0.0
      # azimuth_deg: Structural placement angle around spacecraft in degrees
      azimuth_deg: 0.0
      # max_power: Maximum power output at full illumination in Watts
      max_power: 474.21
      # conversion_efficiency: Optional per-panel efficiency (uses array-level if not specified)
      conversion_efficiency: 0.94
  # conversion_efficiency: Default array-level conversion efficiency if panel does not override
  conversion_efficiency: 0.95

# Payload/Instrument Configuration. Defines science instruments with power draw and data generation rates
payload:
  payload:
    - name: Optical Imager
      # power_draw: Power draw characteristics for the instrument
      power_draw:
        nominal_power: 50.0
        peak_power: 300.0
        power_mode:
          '0': 200.0
          '1': 50.0
          '2': 50.0
        eclipse_power: null
        eclipse_power_mode: {}
      # heater: Optional heater system for the instrument
      heater: null
      # data_generation: Data generation characteristics
      data_generation:
        rate_gbps: 0.0001953125
        per_observation_gb: 0.0

# Battery Configuration. Defines battery capacity, voltage, and charging parameters
battery:
  # name: Battery name/identifier
  name: Default Battery
  # amphour: Battery capacity in Ampere-hours (Ah)
  amphour: 20.0
  # voltage: Nominal battery voltage (V)
  voltage: 28.0
  # watthour: Total energy storage capacity (Wh)
  watthour: 1000.0
  # emergency_recharge: Flag indicating emergency recharge mode
  emergency_recharge: false
  # max_depth_of_discharge: Maximum allowed depth of discharge (0.0-1.0)
  max_depth_of_discharge: 0.4
  # recharge_threshold: Battery level fraction to stop charging (0.0-1.0)
  recharge_threshold: 0.95
  # charge_level: Current battery charge level (Wh)
  charge_level: 1000.0
  # emergency_charging_min_illumination: Illumination threshold for emergency charging (0.0-1.0)
  emergency_charging_min_illumination: 1.0

# Pointing Constraints. Defines geometric constraints for spacecraft pointing
constraint:
  # sun_constraint: Sun constraint configuration
  sun_constraint:
    type: and
    constraints:
    - type: sun
      min_angle: 90.0
      max_angle: null
    - type: not
      constraint:
        type: eclipse
        umbra_only: true
  # anti_sun_constraint: Anti-sun constraint configuration
  anti_sun_constraint:
    type: sun
    min_angle: 0.0
    max_angle: 180.0
  # moon_constraint: Moon constraint configuration
  moon_constraint:
    type: moon
    min_angle: 20.0
    max_angle: null
  # earth_constraint: Earth constraint configuration
  earth_constraint:
    type: earth_limb
    min_angle: 20.0
    max_angle: null
    include_refraction: false
    horizon_dip: false
  # panel_constraint: Solar panel constraint configuration
  panel_constraint:
    type: and
    constraints:
    - type: sun
      min_angle: 45.0
      max_angle: 135.0
    - type: not
      constraint:
        type: eclipse
        umbra_only: true

# Ground Station Network. Defines ground station locations and communication capabilities
ground_stations:
  stations:
    - name: Nairobi
      # code: Short code identifier (e.g., GHA, RWA)
      code: NBO
      # latitude_deg: Latitude in degrees
      latitude_deg: -1.2921
      # longitude_deg: Longitude in degrees
      longitude_deg: 36.8219
      # elevation_m: Elevation above sea level in meters
      elevation_m: 0.0
      # min_elevation_deg: Minimum elevation for a valid pass
      min_elevation_deg: 10.0
      # schedule_probability: Probability of scheduling a pass when available
      schedule_probability: 0.7
      # bands: Per-band capabilities (uplink/downlink rates)
      bands:
      - band: S
        uplink_rate_mbps: 2.0
        downlink_rate_mbps: 10.0
      # gain_db: Antenna gain in dB
      gain_db: null
    - name: South Pole
      # code: Short code identifier (e.g., GHA, RWA)
      code: SPO
      # latitude_deg: Latitude in degrees
      latitude_deg: -90.0
      # longitude_deg: Longitude in degrees
      longitude_deg: 0.0
      # elevation_m: Elevation above sea level in meters
      elevation_m: 2835.0
      # min_elevation_deg: Minimum elevation for a valid pass
      min_elevation_deg: 10.0
      # schedule_probability: Probability of scheduling a pass when available
      schedule_probability: 0.2
      # bands: Per-band capabilities (uplink/downlink rates)
      bands:
      - band: S
        uplink_rate_mbps: 2.0
        downlink_rate_mbps: 10.0
      # gain_db: Antenna gain in dB
      gain_db: null
    - name: North Pole
      # code: Short code identifier (e.g., GHA, RWA)
      code: NPO
      # latitude_deg: Latitude in degrees
      latitude_deg: 90.0
      # longitude_deg: Longitude in degrees
      longitude_deg: 0.0
      # elevation_m: Elevation above sea level in meters
      elevation_m: 0.0
      # min_elevation_deg: Minimum elevation for a valid pass
      min_elevation_deg: 10.0
      # schedule_probability: Probability of scheduling a pass when available
      schedule_probability: 0.2
      # bands: Per-band capabilities (uplink/downlink rates)
      bands:
      - band: S
        uplink_rate_mbps: 2.0
        downlink_rate_mbps: 10.0
      # gain_db: Antenna gain in dB
      gain_db: null
    - name: Punta Veija
      # code: Short code identifier (e.g., GHA, RWA)
      code: PVG
      # latitude_deg: Latitude in degrees
      latitude_deg: 8.7832
      # longitude_deg: Longitude in degrees
      longitude_deg: -71.2325
      # elevation_m: Elevation above sea level in meters
      elevation_m: 0.0
      # min_elevation_deg: Minimum elevation for a valid pass
      min_elevation_deg: 10.0
      # schedule_probability: Probability of scheduling a pass when available
      schedule_probability: 0.5
      # bands: Per-band capabilities (uplink/downlink rates)
      bands:
      - band: S
        uplink_rate_mbps: 2.0
        downlink_rate_mbps: 10.0
      # gain_db: Antenna gain in dB
      gain_db: null

# Onboard Data Recorder. Defines storage capacity and fill thresholds
recorder:
  # name: Recorder name/identifier
  name: Default Recorder
  # capacity_gb: Maximum storage capacity in Gigabits
  capacity_gb: 64.0
  # current_volume_gb: Current data volume stored in Gigabits
  current_volume_gb: 0.0
  # yellow_threshold: Fraction of capacity for yellow alert
  yellow_threshold: 0.7
  # red_threshold: Fraction of capacity for red alert
  red_threshold: 0.9

# Fault Management System. Defines thresholds and responses for system health monitoring
fault_management:
  # thresholds: List of parameter thresholds to monitor
  thresholds:
    - name: battery_level
      # yellow: Yellow threshold value
      yellow: 0.6
      # red: Red threshold value
      red: 0.5
      # direction: Fault direction: 'below' or 'above'
      direction: below
    - name: recorder_fill_fraction
      # yellow: Yellow threshold value
      yellow: 0.7
      # red: Red threshold value
      red: 0.9
      # direction: Fault direction: 'below' or 'above'
      direction: above
  # red_limit_constraints: List of spacecraft-level red limit constraints
  red_limit_constraints:
    - name: Sun Avoidance
      # constraint: Constraint configuration object
      constraint:
        type: and
        constraints:
        - type: sun
          min_angle: 20.0
          max_angle: null
        - type: not
          constraint:
            type: eclipse
            umbra_only: true
      # time_threshold_seconds: Maximum continuous violation time before safe mode trigger
      time_threshold_seconds: 120.0
      # description: Human-readable description of constraint purpose
      description: Spacecraft must avoid pointing too close to the Sun for extended periods.
  # states: Current fault states for monitored parameters
  states: {}
  # safe_mode_on_red: Whether to trigger safe mode on any RED condition
  safe_mode_on_red: true
  # safe_mode_requested: Flag indicating safe mode has been requested
  safe_mode_requested: false
  # events: Event log with timestamps and causes
  events:
    []

# Observation Categories. Defines categories for different observation types with ID ranges
observation_categories:
  # categories: List of observation categories with ID ranges and colors
  categories:
    - name: GO
      # obsid_min: Minimum observation ID (inclusive)
      obsid_min: 20000
      # obsid_max: Maximum observation ID (exclusive)
      obsid_max: 30000
      # color: Matplotlib color for visualization
      color: tab:blue
    - name: Survey
      # obsid_min: Minimum observation ID (inclusive)
      obsid_min: 10000
      # obsid_max: Maximum observation ID (exclusive)
      obsid_max: 20000
      # color: Matplotlib color for visualization
      color: tab:green
    - name: GRB
      # obsid_min: Minimum observation ID (inclusive)
      obsid_min: 1000000
      # obsid_max: Maximum observation ID (exclusive)
      obsid_max: 2000000
      # color: Matplotlib color for visualization
      color: tab:orange
    - name: TOO
      # obsid_min: Minimum observation ID (inclusive)
      obsid_min: 30000
      # obsid_max: Maximum observation ID (exclusive)
      obsid_max: 40000
      # color: Matplotlib color for visualization
      color: tab:red
    - name: Charging
      # obsid_min: Minimum observation ID (inclusive)
      obsid_min: 999000
      # obsid_max: Maximum observation ID (exclusive)
      obsid_max: 1000000
      # color: Matplotlib color for visualization
      color: gold
  # default_name: Default category name for unmatched obsids
  default_name: Other
  # default_color: Default color for unmatched obsids
  default_color: tab:purple

# Target Configuration. Defines observational targets and scheduling parameters
targets:
  # slew_distance_weight: Weight to penalize long slews when selecting next target
  slew_distance_weight: 0.0
